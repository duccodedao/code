<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>D·ª± B√°o Th·ªùi Ti·∫øt</title>
    <!-- Th√™m li√™n k·∫øt ƒë·∫øn th∆∞ vi·ªán swal.fire -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>

    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #fff;
            margin: 0;
            padding: 0;
            text-align: center;
            color: #333;
        }

        header {
            background-color: #4CAF50;
            padding: 15px;
            color: white;
            font-size: 24px;
        }

        main {
            max-width: 600px;
            margin: 20px auto;
            background-color: #fff;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            padding: 20px;
        }

        label {
            display: block;
            margin: 10px 0 5px;
        }

        select {
            width: 100%;
            padding: 10px;
            font-size: 16px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }

        button {
            background-color: #4CAF50;
            color: #fff;
            border: none;
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
            margin-top: 10px;
            border-radius: 5px;
        }

        #weatherInfo {
            margin-top: 20px;
            text-align: left;
        }

        .forecast-item {
            margin: 10px 0;
        }

        /* Th√™m ki·ªÉu CSS cho h√¨nh ·∫£nh */
        .weather-image {
            width: 50px;
            height: 50px;
            object-fit: cover;
            border-radius: 50%;
            margin-right: 10px;
        }
    </style>
</head>
<body>

    <header>D·ª± B√°o Th·ªùi Ti·∫øt</header>

    <main>
        <label for="provinceSelect">Ch·ªçn T·ªânh:</label>
        <select id="provinceSelect">
            <option value="An Giang">An Giang</option>
            <option value="B√† R·ªãa - V≈©ng T√†u">B√† R·ªãa - V≈©ng T√†u</option>
            <option value="B·∫°c Li√™u">B·∫°c Li√™u</option>
            <option value="B·∫Øc K·∫°n">B·∫Øc K·∫°n</option>
            <option value="B·∫Øc Giang">B·∫Øc Giang</option>
            <option value="B·∫Øc Ninh">B·∫Øc Ninh</option>
            <option value="B·∫øn Tre">B·∫øn Tre</option>
            <option value="B√¨nh D∆∞∆°ng">B√¨nh D∆∞∆°ng</option>
            <option value="B√¨nh ƒê·ªãnh">B√¨nh ƒê·ªãnh</option>
            <option value="B√¨nh Ph∆∞·ªõc">B√¨nh Ph∆∞·ªõc</option>
            <option value="B√¨nh Thu·∫≠n">B√¨nh Thu·∫≠n</option>
            <option value="C√† Mau">C√† Mau</option>
            <option value="Cao B·∫±ng">Cao B·∫±ng</option>
            <option value="ƒê·∫Øk L·∫Øk">ƒê·∫Øk L·∫Øk</option>
            <option value="ƒê·∫Øk N√¥ng">ƒê·∫Øk N√¥ng</option>
            <option value="ƒêi·ªán Bi√™n">ƒêi·ªán Bi√™n</option>
            <option value="ƒê·ªìng Nai">ƒê·ªìng Nai</option>
            <option value="ƒê·ªìng Th√°p">ƒê·ªìng Th√°p</option>
            <option value="Gia Lai">Gia Lai</option>
            <option value="H√† Giang">H√† Giang</option>
            <option value="H√† Nam">H√† Nam</option>
            <option value="H√† N·ªôi">H√† N·ªôi</option>
            <option value="H√† Tƒ©nh">H√† Tƒ©nh</option>
            <option value="H·∫£i D∆∞∆°ng">H·∫£i D∆∞∆°ng</option>
            <option value="H·∫£i Ph√≤ng">H·∫£i Ph√≤ng</option>
            <option value="H√≤a B√¨nh">H√≤a B√¨nh</option>
            <option value="H·ªì Ch√≠ Minh">H·ªì Ch√≠ Minh</option>
            <option value="H·∫≠u Giang">H·∫≠u Giang</option>
            <option value="H∆∞ng Y√™n">H∆∞ng Y√™n</option>
            <option value="Kh√°nh H√≤a">Kh√°nh H√≤a</option>
            <option value="Ki√™n Giang">Ki√™n Giang</option>
            <option value="Kon Tum">Kon Tum</option>
            <option value="Lai Ch√¢u">Lai Ch√¢u</option>
            <option value="L√¢m ƒê·ªìng">L√¢m ƒê·ªìng</option>
            <option value="L·∫°ng S∆°n">L·∫°ng S∆°n</option>
            <option value="L√†o Cai">L√†o Cai</option>
            <option value="Long An">Long An</option>
            <option value="Nam ƒê·ªãnh">Nam ƒê·ªãnh</option>
            <option value="Ngh·ªá An">Ngh·ªá An</option>
            <option value="Ninh B√¨nh">Ninh B√¨nh</option>
            <option value="Ninh Thu·∫≠n">Ninh Thu·∫≠n</option>
            <option value="Ph√∫ Th·ªç">Ph√∫ Th·ªç</option>
            <option value="Ph√∫ Y√™n">Ph√∫ Y√™n</option>
            <option value="Qu·∫£ng B√¨nh">Qu·∫£ng B√¨nh</option>
            <option value="Qu·∫£ng Nam">Qu·∫£ng Nam</option>
            <option value="Qu·∫£ng Ng√£i">Qu·∫£ng Ng√£i</option>
            <option value="Qu·∫£ng Ninh">Qu·∫£ng Ninh</option>
            <option value="Qu·∫£ng Tr·ªã">Qu·∫£ng Tr·ªã</option>
            <option value="S√≥c TrƒÉng">S√≥c TrƒÉng</option>
            <option value="S∆°n La">S∆°n La</option>
            <option value="T√¢y Ninh">T√¢y Ninh</option>
            <option value="Th√°i B√¨nh">Th√°i B√¨nh</option>
            <option value="Th√°i Nguy√™n">Th√°i Nguy√™n</option>
            <option value="Thanh H√≥a">Thanh H√≥a</option>
            <option value="Th·ª´a Thi√™n Hu·∫ø">Th·ª´a Thi√™n Hu·∫ø</option>
            <option value="Ti·ªÅn Giang">Ti·ªÅn Giang</option>
            <option value="Tr√† Vinh">Tr√† Vinh</option>
            <option value="Tuy√™n Quang">Tuy√™n Quang</option>
            <option value="Vƒ©nh Long">Vƒ©nh Long</option>
            <option value="Vƒ©nh Ph√∫c">Vƒ©nh Ph√∫c</option>
            <option value="Y√™n B√°i">Y√™n B√°i</option>
        </select>
        
        <button onclick="getWeather()">K·∫øt Qu·∫£ Th·ªùi Ti·∫øt</button>

        <div id="weatherInfo"></div>
    </main>

    <script>
        const apiKey = '2d87e5bd6e13ae4733f2b8b8450171c5';

        // H√†m hi·ªÉn th·ªã th√¥ng b√°o s·ª≠ d·ª•ng swal.fire v·ªõi h√¨nh ·∫£nh thay v√¨ icon
        function showWeatherAlert(message) {
            Swal.fire({
                title: 'K·∫øt Qu·∫£ Th·ªùi Ti·∫øt',
                html: message,
                icon: 'info',
                confirmButtonText: 'ƒê√≥ng',
            });
        }

        async function getWeather() {
            try {
                const provinceSelect = document.getElementById('provinceSelect');
                const selectedProvince = provinceSelect.options[provinceSelect.selectedIndex].value;

                if (!selectedProvince) {
                    Swal.fire('Vui l√≤ng ch·ªçn t·ªânh.');
                    return;
                }

                const currentWeatherApiUrl = `https://api.openweathermap.org/data/2.5/weather?q=${selectedProvince}&appid=${apiKey}&units=metric`;
                const forecastApiUrl = `https://api.openweathermap.org/data/2.5/forecast?q=${selectedProvince}&appid=${apiKey}&units=metric`;

                const currentWeatherResponse = await fetch(currentWeatherApiUrl);
                const currentWeatherData = await currentWeatherResponse.json();

                const forecastResponse = await fetch(forecastApiUrl);
                const forecastData = await forecastResponse.json();

                const weatherInfo = document.getElementById('weatherInfo');
                const temperature = currentWeatherData.main.temp;
                const description = currentWeatherData.weather[0].description;
                const humidity = currentWeatherData.main.humidity;
                const windSpeed = currentWeatherData.wind.speed;
                const currentDate = new Date();

                let temperatureDescription = '';

                if (temperature < 15) {
                    temperatureDescription = 'L·∫°nh mu·ªën teoo üê¶ lu√¥n nha m√°!';
                } else if (temperature >= 15 && temperature < 25) {
                    temperatureDescription = 'M√°t qu√° ch·ªùi';
                } else if (temperature >= 25 && temperature < 30) {
                    temperatureDescription = ' Th·ªùi ti·∫øt c≈©ng okeee!';
                } else if (temperature >= 30 && temperature < 35) {
                    temperatureDescription = 'N√≥ng mu·ªën ch·∫øt lu√¥n nha m√°';
                } else {
                    temperatureDescription = 'N√≥ng mu·ªën s·∫£ng lu√¥n ƒÉ';
                }

                let message = `<p>Th·ªùi Ti·∫øt Hi·ªán T·∫°i - ${currentDate.toLocaleDateString()}</p>`;
                message += `<p>Nhi·ªát ƒê·ªô: ${temperature} &#8451;</p>`;
                message += `<p>M√¥ T·∫£: ${description}</p>`;
                message += `<p>ƒê·ªô ·∫®m: ${humidity}%</p>`;
                message += `<p>T·ªëc ƒê·ªô Gi√≥: ${windSpeed} m/s</p>`;
                message += `<p>${temperatureDescription}</p>`;

                // Hi·ªÉn th·ªã d·ª± b√°o th·ªùi ti·∫øt cho 5 ng√†y ti·∫øp theo
                message += '<p>S∆°n L√Ω H·ªìng ƒê·ª©c D·ª± B√°o Cho 5 Ng√†y Ti·∫øp Theo:</p>';
                for (let i = 0; i < 5; i++) {
                    const forecastDate = new Date(forecastData.list[i * 8].dt * 1000);
                    const forecastTemperature = forecastData.list[i * 8].main.temp;
                    const forecastDescription = forecastData.list[i * 8].weather[0].description;

                    message += `<div class="forecast-item">${forecastDate.toLocaleDateString()} - ${forecastTemperature} &#8451;, ${forecastDescription}</div>`;
                }

                // Hi·ªÉn th·ªã th√¥ng b√°o v·ªõi n√∫t "ƒê√≥ng" v√† h√¨nh ·∫£nh thay v√¨ icon
                showWeatherAlert(message);
            } catch (error) {
                console.error('L·ªói khi l·∫•y d·ªØ li·ªáu th·ªùi ti·∫øt:', error);
                Swal.fire('ƒê√£ x·∫£y ra l·ªói khi l·∫•y d·ªØ li·ªáu th·ªùi ti·∫øt.');
            }
        }
    </script>

</body>
</html>
